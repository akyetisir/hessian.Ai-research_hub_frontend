
<!DOCTYPE html>
<html lang="en">
<head>
<title>search</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">



</head>
<body>

<app-header></app-header>

<header>
    <h2>All Research</h2>
</header>
<div class="sorting">
    <span>Sort by:</span>
    <select [(ngModel)]="sortOption" (change)="sortResults()" class="form-control expanded-select">
        <option *ngFor="let option of sortOptions" [value]="option">{{ option }}</option>
    </select>
    
</div>            

<section>

  <nav>
    <ul>
        <li> <section id="search-bar">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input type="text" placeholder="Search research" [(ngModel)]="searchQuery" />
        </section></li>
        
        <li><section id="reset-search"> 
            <button class="reset-search" (click)="resetFilters()">Reset search</button>
        </section></li>
        
        <br>


        <!-- Filters Section -->
       
        <!-- Filter: Tags/Research Area -->
        <div class="filters">
          <h4 (click)="toggleFilter('researchAreas')">
            Research Areas <i class="fa fa-chevron-down"></i>
          </h4>
          <ul *ngIf="filterState.researchAreas">
            <li *ngFor="let area of researchAreas">
              <input type="checkbox" [(ngModel)]="filters.selectedAreas[area]" (change)="applyFilters()" />
              {{ area }}
            </li>
          </ul>
        </div>

        <!-- Filter: Publish Year -->
        <div class="filters">
          <h4 (click)="toggleFilter('publishYear')">
            Publish Year <i class="fa fa-chevron-down"></i>
          </h4>
          <ul *ngIf="filterState.publishYear">
            <li *ngFor="let year of publishYears">
              <input type="checkbox" [(ngModel)]="filters.selectedYears[year]" (change)="applyFilters()" />
              {{ year }}
            </li>
          </ul>
        </div>

        <!-- Filter: Views -->
        <div class="filters">
          <h4 (click)="toggleFilter('views')">
            Views <i class="fa fa-chevron-down"></i>
          </h4>
          <ul *ngIf="filterState.views">
            <li *ngFor="let view of viewOptions">
              <input type="checkbox" [(ngModel)]="filters.selectedViews[view]" (change)="applyFilters()" />
              {{ view }}
            </li>
          </ul>
        </div>



    </ul>
  </nav>
  
  <article>
    <!-- Display papers -->
    <div class="papers-list">
      <!-- Show articles if results are from filters or search -->
      <div *ngFor="let paper of filteredPapers.length > 0 ? filteredPapers : searchedPapers">
        <div class="paper-item">
          <h3>
            <a [routerLink]="['/paper', paper.title]" routerLinkActive="router-link-active">{{ paper.title }}</a>
          </h3>
          <p><strong>Summary:</strong> {{ paper.abstract }}</p>
          <p><strong>Category:</strong> {{ paper.tags.join(', ') }}</p>
          <p><strong>Authors:</strong> {{ paper.authors.join(', ') }}</p>
          <p><strong>Year:</strong> {{ paper.date | date: 'yyyy' }}</p>
          <p><strong>Views:</strong> {{ paper.views }}</p>
        </div>
        <hr />
      </div>
    
      <!-- Show message if there are no articles -->
      <div *ngIf="filteredPapers.length === 0 && searchedPapers.length === 0">
        <p>No papers found matching the selected filters or search query.</p>
      </div>
    </div>
      
  
    <!-- Pagination -->
    <div class="pagination">
        <button (click)="previousPage()"> 
            <i class="fa-solid fa-circle-arrow-left"></i> </button>
        <span>{{ currentPage }} of {{ totalPages }}</span>
        <button (click)="nextPage()"> 
            <i class="fa-solid fa-circle-arrow-right"></i> </button>
    </div>
</article>
</section>

<app-footer></app-footer>

</body>
</html>

